---
description: How to expand macros to inspect generated code
---

# Expanding Macros

Use `cargo expand` to inspect the code generated by macros. This is essential when debugging or verifying macro invocations.

## Prerequisites

`cargo-expand` must be installed. If not, run: `cargo install cargo-expand`.

// turbo-all

1. Check `Cargo.toml` for the current MuJoCo version (look for `+mj-X.Y.Z` in the package version). Then find the matching `mujoco-X.Y.Z/` directory at the repository root.

2. Expand macros and save to file (replace `X.Y.Z`):
```bash
export MUJOCO_DYNAMIC_LINK_DIR=$(realpath mujoco-X.Y.Z/lib) && export LD_LIBRARY_PATH=$(realpath mujoco-X.Y.Z/lib/) && cargo expand > expanded.rs

```

3. Check the terminal output for errors (compilation errors will appear on stderr).

4. Inspect the expanded code:
```
view_file expanded.rs (or search it with grep_search)
```

> [!NOTE]
> - After expanding, search `expanded.rs` for the generated methods to verify correctness.
> - The `expanded.rs` file is a local artifact â€” do NOT commit it.
